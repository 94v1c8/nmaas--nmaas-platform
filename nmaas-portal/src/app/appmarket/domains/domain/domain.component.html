<div class="col-sm-12 col-sm-offset-1 col-sm-10 col-md-offset-1 col-md-10">
	<h3>{{ 'DOMAIN_DETAILS.TITLE' | translate }}</h3>
	<form *ngIf="domain" (submit)="submit()" class="form-horizontal">
		<div class="form-group">
			<label for="name" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.NAME' | translate }}</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" [disabled]="isInMode(ComponentMode.VIEW) || authService.hasRole('ROLE_OPERATOR')" id="name" name="name"
					[(ngModel)]="domain.name" #name="ngModel" required>
				<div *ngIf="name.invalid && (name.dirty || name.touched)"
					class="alert alert-danger">
					<div *ngIf="name.errors.required">{{ 'DOMAIN_DETAILS.NAME_IS_REQUIRED_MESSAGE' | translate }}</div>
				</div>
			</div>
		</div>


		<div class="form-group" *ngIf="!isInMode(ComponentMode.EDIT)">
			<label for="codename" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.CODE_NAME' | translate }}</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" [disabled]="isInMode(ComponentMode.VIEW)" id="codename"
					name="codename" pattern="[a-zA-Z0-9_]*"
					[(ngModel)]="domain.codename" #codename="ngModel" minlength="2" maxlength="8" required>
				<div *ngIf="codename.invalid && (codename.dirty || codename.touched)"
					class="alert alert-danger">

					<div *ngIf="codename.errors.required">{{ 'DOMAIN_DETAILS.CODE_NAME_IS_REQUIRED_MESSAGE' | translate }}</div>
					<div *ngIf="codename.errors.pattern">{{ 'DOMAIN_DETAILS.CODE_NAME_PATTERN_MESSAGE_1' | translate }}</div>
					<div *ngIf="codename.errors.minlength || codename.errors.maxlength">{{ 'DOMAIN_DETAILS.CODE_NAME_PATTERN_MESSAGE_2' | translate }}</div>

				</div>
			</div>
		</div>

		<div class="form-group">
			<label for="active" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.ACTIVE' | translate }}</label>
			<div class="col-sm-10">
				<input type="checkbox" class="btn btn-default" [disabled]="isInMode(ComponentMode.VIEW) || authService.hasRole('ROLE_OPERATOR')" id="active"
					name="active" [(ngModel)]="domain.active">
			</div>
		</div>

		<div class="form-group" *ngIf="!isInMode(ComponentMode.CREATE) && (authService.hasRole('ROLE_SYSTEM_ADMIN') || authService.hasRole('ROLE_OPERATOR'))">
			<label class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.ID_IN_DB' | translate }}</label>
			<div class="col-sm-10">
				<p class="form-control-static">{{domain.id}}</p>
			</div>
		</div>

		<hr/>

		<div class="form-group" *ngIf="domain.id !== domainService.getGlobalDomainId()">
			<label for="kubernetesNamespace" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.KUBERNETES_NAMESPACE' | translate }}</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" [disabled]="isInMode(ComponentMode.VIEW)" id="kubernetesNamespace"
				name="kubernetesNamespace" [(ngModel)]="domain.kubernetesNamespace">
			</div>
		</div>

        <div class="form-group" *ngIf="domain.id !== domainService.getGlobalDomainId()">
            <label for="kubernetesStorageClass" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.KUBERNETES_STORAGE_CLASS' | translate }}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" [disabled]="isInMode(ComponentMode.VIEW)" id="kubernetesStorageClass"
                       name="kubernetesStorageClass" [(ngModel)]="domain.kubernetesStorageClass">
            </div>
        </div>

		<div class="form-group" *ngIf="domain.id !== domainService.getGlobalDomainId()">
			<label for="externalServiceDomain " class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.EXTERNAL_SERVICE_DOMAIN' | translate }}</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" [disabled]="isInMode(ComponentMode.VIEW)" id="externalServiceDomain "
					   name="externalServiceDomain " [(ngModel)]="domain.externalServiceDomain">
			</div>
		</div>

		<div class="form-group" *ngIf="domain?.id !== domainService.getGlobalDomainId() && isInMode(ComponentMode.VIEW)">
			<label class="col-sm-2 control-label text-right" for="configured-status">{{ 'DOMAIN_DETAILS.DCN_STATUS' | translate }}</label>
			<div class="col-sm-10" id="configured-status" style="padding-top: 6px;">
				<p *ngIf="domain?.dcnConfigured">{{ 'DOMAIN_DETAILS.CONFIGURED_VIEW' | translate }}</p>
				<p *ngIf="!domain?.dcnConfigured">{{ 'DOMAIN_DETAILS.NOT_CONFIGURED_VIEW' | translate }}</p>
			</div>
		</div>

		<div class="form-group" *ngIf="domain.id !== domainService.getGlobalDomainId() && isInMode(ComponentMode.CREATE)">
			<label for="dcnConfigured" class="col-sm-2 control-label">{{ 'DOMAIN_DETAILS.DCN_CONFIGURED' | translate }}</label>
			<div class="col-sm-10">
				<input type="checkbox" class="btn btn-default" [disabled]="isInMode(ComponentMode.VIEW)" id="dcnConfigured"
				name="dcnConfigured" [(ngModel)]="domain.dcnConfigured">
			</div>
		</div>

		<div class="panel panel-default" *ngIf="isInMode(ComponentMode.VIEW) && !authService.hasRole('ROLE_OPERATOR')">
			<div class="panel-heading">{{ 'DOMAIN_DETAILS.DOMAIN_USERS' | translate }}</div>
				<div class="panel-body">
        			<table class="table table-hover table-condensed">
            			<thead>
            				<tr>
                				<th *ngIf="authService.hasRole('ROLE_SYSTEM_ADMIN')">{{ 'DOMAIN_DETAILS.ID' | translate }}</th>
                				<th>{{ 'DOMAIN_DETAILS.USER_NAME' | translate }}</th>
								<th>{{ 'DOMAIN_DETAILS.FIRST_NAME' | translate }}</th>
								<th>{{ 'DOMAIN_DETAILS.LAST_NAME' | translate }}</th>
                				<th>{{ 'DOMAIN_DETAILS.ROLES' | translate }}</th>
                				<th>&nbsp;</th>
            				</tr>
            			</thead>

						<tbody>
							<ng-template ngFor let-user [ngForOf]="users">
								<tr>
									<td *ngIf="authService.hasRole('ROLE_SYSTEM_ADMIN')">{{user.id}}</td>
									<td>{{user.username}}</td>
									<td> {{user.firstname}}</td>
									<td> {{user.lastname}}</td>
									<td *ngIf="domainId == domainService.getGlobalDomainId()">
										<div *ngFor="let role of filterDomainNames(user); last as isLast">
											<span *ngIf="!isLast" style="float:left;padding-right: 3px">{{role.role | slice:5}}@{{this.getDomainName(role.domainId)|async}}, </span>
											<span *ngIf="isLast" style="float:left">{{role.role | slice:5}}@{{this.getDomainName(role.domainId)|async}}</span>
										</div>
									</td>
									<td *ngIf="domainId != domainService.getGlobalDomainId()">
										<span *ngFor="let role of this.getDomainRoleNames(user.roles)">
											{{role.role | slice:5}}
										</span>
									</td>
								</tr>
							</ng-template>

            			</tbody>
					</table>
				</div>
			</div>
		<button *ngIf="isInMode(ComponentMode.EDIT) || isInMode(ComponentMode.CREATE)" type="submit" class="btn btn-default" valid>{{ 'DOMAIN_DETAILS.SUBMIT_BUTTON' | translate }}</button>
	</form>
	<hr/>
	<div class="form-group" *ngIf="domain?.id !== domainService.getGlobalDomainId() && isInMode(ComponentMode.EDIT)">
		<label for="dcnConfiguredButton" class="col-sm-2 control-label" *ngIf="domain?.dcnConfigured">{{ 'DOMAIN_DETAILS.CONFIGURED' | translate }}</label>
		<label for="dcnNotConfiguredButton" class="col-sm-2 control-label" *ngIf="!domain?.dcnConfigured">{{ 'DOMAIN_DETAILS.NOT_CONFIGURED' | translate }}</label>
		<div class="col-sm-10">
			<button *ngIf="domain?.dcnConfigured" id="dcnConfiguredButton" type="button" name="dcnConfiguredButton" class="btn btn-primary" (click)="this.modal.show()" [disabled]="!isInMode(ComponentMode.EDIT)">{{ 'DOMAIN_DETAILS.CHANGE_TO_NOT_CONFIGURE' | translate }}</button>
			<button *ngIf="!domain?.dcnConfigured" id="dcnNotConfiguredButton" type="button" name="dcnConfiguredButton" class="btn btn-primary" (click)="this.modal.show()" [disabled]="!isInMode(ComponentMode.EDIT)">{{ 'DOMAIN_DETAILS.CHANGE_TO_CONFIGURE' | translate }}</button>
		</div>
	</div>
	<div *ngIf="!domain">{{ 'DOMAIN_DETAILS.NOT_FOUND' | translate }}</div>
</div>

<nmaas-modal>
	<div class="nmaas-modal-header">
		<h4 style="text-align: center">{{ 'DOMAIN_DETAILS.DCN_STATUS_CHANGE' | translate }}</h4>
	</div>
	<div class="nmaas-modal-body">
		<div class="form-group text-center">
			<p>{{ 'DOMAIN_DETAILS.QUESTION_1' | translate }} {{domain?.name}}{{ 'DOMAIN_DETAILS.QUESTION_2' | translate }}</p>
		</div>
	</div>
	<div class="nmaas-modal-footer text-center">
		<button class="btn btn-danger" style="display: inline-block" (click)="updateDcnConfigured()">{{ 'DOMAIN_DETAILS.YES_BUTTON' | translate }}</button>
		<button class="btn btn-primary" style="display: inline-block" (click)="this.modal.hide()">{{ 'DOMAIN_DETAILS.CANCEL_BUTTON' | translate }}</button>
	</div>
</nmaas-modal>