<div class="col-sm-12 col-sm-offset-1 col-sm 10 col-md-offset-1 col-md-10">
  <h3>{{'APPS_MANAGEMENT.TITLE'| translate}}</h3>
  <button [routerLink]="['/management/apps/create']" class="btn btn-primary">{{ 'APPS_MANAGEMENT.ADD_BUTTON' | translate }}</button>
  <hr>
  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th></th>
      <th>{{'APPS_MANAGEMENT.NAME' | translate}}</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
    </thead>

    <tbody>
    <ng-template ngFor let-app [ngForOf]="apps" let-i="index">
      <tr class="table-row" (click)="clickTableRow(app)">
        <td *ngIf="!app.rowWithVersionVisible"><span class="glyphicon glyphicon-chevron-right"></span></td>
        <td *ngIf="app.rowWithVersionVisible"><span class="glyphicon glyphicon-chevron-down"></span></td>
        <td>{{app?.name}}</td>
        <td></td>
        <td></td>
        <td class="text-right">
          <div class="btn-group">
            <button [routerLink]="['/management/apps/create/version', app?.name]" class="btn btn-sm btn-success">{{ 'APPS_MANAGEMENT.ADD_NEW_VERSION_BUTTON' | translate }}</button>
            <button [routerLink]="['/management/apps/edit', app?.id]" class="btn btn-sm btn-warning">{{ 'APPS_MANAGEMENT.EDIT_BUTTON' | translate }}</button>
          </div>
        </td>
      </tr>
      <ng-template ngFor let-version [ngForOf]="app.appVersions">
        <tr *ngIf="app.rowWithVersionVisible">
          <td></td>
          <td style="width: 10%"></td>
          <td>{{version.version}}</td>
          <td>{{"ENUM.STATE." + getStateAsString(version.state).toUpperCase() | translate }}</td>
          <td class="text-right">
            <div class="btn-group">
              <button [disabled]="getStateAsString(version?.state) === 'DELETED'" (click)="showModal(app, version)" class="btn btn-sm btn-danger">{{ 'APPS_MANAGEMENT.CHANGE_STATE_BUTTON' | translate }}</button>
              <button [routerLink]="['/management/apps/view', version?.appVersionId]" class="btn btn-sm btn-primary">{{ 'APPS_MANAGEMENT.VIEW_BUTTON' | translate }}</button>
              <button [routerLink]="['/management/apps/edit/version', version?.appVersionId]" class="btn btn-sm btn-warning">{{ 'APPS_MANAGEMENT.EDIT_BUTTON' | translate }}</button>
            </div>
          </td>
        </tr>
      </ng-template>
    </ng-template>
    </tbody>
  </table>

</div>
<app-appchangestatemodal [appName]="selectedAppName" [app]="selectedVersion"></app-appchangestatemodal>
