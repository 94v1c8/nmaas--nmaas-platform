
<div *ngIf="appId" class="container">
	<div class="row">
		<div class="col-xs-4 col-sm-3 col-md-3 col-lg-2">
			<div class="thumbnail">
				<img alt="App logo" [src]="appImagesService.getAppLogoUrl(app?.id) | secure" onError="this.src='assets/images/app-logo-example.png'"/>
			</div>
		</div>
		<div class="col-xs-8 col-sm-9 col-md-9 col-lg-10">
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					<h2>{{app?.name}}</h2>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					<div class="btn-group pull-right">
						<a role="button" href="{{app?.wwwUrl}}" class="btn btn-default">WWW</a>
						<a role="button" href="{{app?.sourceUrl}}" class="btn btn-default">Source</a>
						<a role="button" href="{{app?.issuesUrl}}" class="btn btn-default">Issues</a>
					</div>
				</div>
			</div>

			<hr>
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">Version: {{app?.version}}</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">License: {{app?.license}}</div>
			</div>
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					Tags: {{app?.tags.join(", ")}}
				</div>
			</div>
			<hr>
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					<p>
						<span>Rating:</span>
						<rate name="appRate" [pathUrl]="'/apps/' + appId + '/rate'"></rate>
					</p>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					<p>
						<span>My rating:</span>
						<rate name="myAppRate" [editable]="true" (onChange)="onRateChanged()" [pathUrl]="'/apps/' + appId + '/rate/my'"></rate>
					</p>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
					<div *ngIf="!subscribed && isSubscriptionAllowed()" class="btn-group pull-right">
						<button class="btn btn-primary" (click)="subscribe()">Subscribe</button>
					</div>
					<div *ngIf="subscribed" class="btn-group pull-right">
						<button *ngIf="isDeploymentAllowed()" class="btn btn-primary" (click)="appInstallModal.show()">Deploy</button>
						<button *ngIf="isSubscriptionAllowed()" class="btn btn-danger" (click)="unsubscribe()">Unsubscribe</button>
					</div>
					
				</div>
			</div>
		</div>
	</div>


	<div class='row'>
		<h3>Screenshots</h3>
		<hr>
		<screenshots [pathUrl]="'/apps/' + appId + '/screenshots'"></screenshots>
	</div>

	<div class="row">
		<h3>Description</h3>
		<hr>
		{{app?.fullDescription}}
	</div>
	<hr>

	<comments [pathUrl]="'/apps/' + appId + '/comments'"></comments>


	<nmaas-modal-app-install [app]="app">
	</nmaas-modal-app-install>

</div>
