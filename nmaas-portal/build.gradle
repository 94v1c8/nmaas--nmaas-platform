//jar {
//	baseName = 'nmaas-portal'
//	version = project.version
//}
import org.gradle.internal.os.OperatingSystem;


plugins {
	id "com.moowork.node" version "1.0.1"
	id 'java'
}

task clean(type: Delete) {
	delete 'build'
}

task build(type: Exec) {
	println 'Building using angular-cli'

	if ( OperatingSystem.current().isWindows() ) {
		commandLine 'cmd', '/c', 'ng', 'build'
	} else {
		commandLine 'ng', 'build'
	}	
	
}
build.dependsOn(npm_install)

task dist(type: Zip) {
	from 'build/app' 
	baseName 'nmaas-portal'
}
build.doLast { tasks.dist.execute() }

task run(type: Exec) {
	println 'Running app using angular-cli'
	
	if ( OperatingSystem.current().isWindows() ) {
		commandLine 'cmd', '/c', 'ng', 'serve'
	} else {
		commandLine 'ng', 'serve'
	}		
}
build.dependsOn(npm_install)

