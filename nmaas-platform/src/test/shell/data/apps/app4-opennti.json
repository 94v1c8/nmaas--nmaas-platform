{
	"name":"OpenNTI",
	"version":"0.1",
	"license":"Apache 2.0",
	"briefDescription":"Open Network Telemetry Collector built with open source tools",
	"tags": [ "management", "monitoring", "telemetry"],
	"fullDescription" : "OpenNTI is a container packaged with all tools needed to collect and visualize time series data from network devices. Data can be collected from different sources: Data Collection Agent - Collect data on devices using CLI/Shell or Netconf, Data Streaming Collector - Take all data streamed by Juniper devices as Input (JTI, Analyticsd, soon Openconfig with gRPC) or Statsd interface - Accept any Statsd packets. It's pre-configured with all tools and with a default dashboard .. Send it data, it will graph it",
	"wwwUrl" : "http://open-nti.readthedocs.io/en/latest",
	"sourceUrl" : "https://github.com/Juniper/open-nti",
	"issuesUrl": "https://github.com/Juniper/open-nti/issues",
	"appDeploymentSpec": {
		"supportedDeploymentEnvironments": [
			"DOCKER_COMPOSE"
		],
		"dockerComposeFileTemplate": {
			"dcnAttachedContainers": [
				{"name": "snmp", "description": "snmp"},
				{"name": "opennti", "description": "opennti"}
			],
			"composeFileTemplateContent": "version: '2'\nservices:\n  jti:\n    image: llopat/geant-nmaas-opennti-input-jti:1.0\n    environment:\n      - \"INFLUXDB_ADDR=opennti\"\n      - \"OUTPUT_INFLUXDB=true\"\n      - \"OUTPUT_STDOUT=false\"\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    networks:\n      nmaas-inter-container:\n    privileged: true\n\n  syslog:\n    image: llopat/geant-nmaas-opennti-input-syslog:1.0\n    environment:\n      - \"INFLUXDB_ADDR=opennti\"\n      - \"OUTPUT_INFLUXDB=true\"\n      - \"OUTPUT_STDOUT=false\"\n    volumes:\n      - /etc/localtime:/etc/localtime\n    networks:\n      nmaas-inter-container:\n    privileged: true\n\n  ${snmp.container_name}:\n    image: llopat/geant-nmaas-opennti-input-snmp:1.0\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    networks:\n      nmaas-dcn:\n        ipv4_address: ${snmp.container_ip_address}\n      nmaas-inter-container:\n    privileged: true\n\n  input-internal:\n    image: llopat/geant-nmaas-opennti-input-internal:1.0\n    environment:\n      - \"HOST_PROC=/rootfs/proc\"\n      - \"HOST_SYS=/rootfs/sys\"\n      - \"HOST_ETC=/rootfs/etc\"\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - /sys:/rootfs/sys:ro\n      - /proc:/rootfs/proc:ro\n      - /etc:/rootfs/etc:ro\n    networks:\n      nmaas-inter-container:\n\n  ${opennti.container_name}:\n    image: llopat/geant-nmaas-opennti:1.0\n    volumes:\n      - ${volume}:/opt/open-nti/data\n      - /etc/localtime:/etc/localtime:ro\n    ports:\n      - ${port}:80\n    networks:\n      nmaas-ext-access:\n      nmaas-dcn:\n          ipv4_address: ${opennti.container_ip_address}\n      nmaas-inter-container:\n    privileged: true\n\nnetworks:\n  nmaas-ext-access:\n    external:\n      name: ${nmaas_ext_access_network}\n  nmaas-dcn:\n    external:\n      name: ${nmaas_dcn_network}\n  nmaas-inter-container:\n"
		},
		"defaultStorageSpace":20,
		"configFileRepositoryRequired":true
	},
	"configTemplate": {
		"template": {
			"schema": {
				"type": "object",
				"properties": {
					"openntiUsername": {
						"type": "string",
						"title": "Username"
					},
					"openntiPassword": {
						"type": "string",
						"title": "Password"
					},
					"targets": {
						"title": "Routers",
						"type": "array",
						"minItems": 1,
						"items": {
							"type": "object",
							"properties": {
								"ipAddress": {
									"title": "IP address",
									"type": "string",
									"pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
								}
							}
						}
					}
				},
				"required": [
					"openntiUsername", "openntiPassword", "targets"
				]
			},
			"form": [
				"openntiUsername",
				{
					"key":"openntiPassword",
					"type":"password"
				},
				{
					"key":"targets",
					"items":[
						"targets[]",
						"targets[].ipAddress"
					]
				}
			]
		}
	}
}